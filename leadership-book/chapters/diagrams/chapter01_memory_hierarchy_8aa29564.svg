<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <!-- Background -->
  <rect width="1200" height="800" fill="white"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="26" font-weight="bold" text-anchor="middle" fill="#333">
    GPU Memory Hierarchy and Compute vs Memory Bound Operations
  </text>
  
  <!-- Memory Hierarchy Pyramid -->
  <g id="pyramid">
    <text x="300" y="80" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
      Memory Hierarchy
    </text>
    
    <!-- Level 1: Registers (Top - Fastest) -->
    <polygon points="300,100 200,180 400,180" fill="#10b981" opacity="0.8" stroke="#059669" stroke-width="2"/>
    <text x="300" y="140" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Registers
    </text>
    <text x="300" y="160" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      ~20 MB
    </text>
    <text x="300" y="175" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      ~20 TB/s
    </text>
    
    <!-- Level 2: L2 Cache -->
    <polygon points="200,180 150,260 450,260 400,180" fill="#34d399" opacity="0.8" stroke="#10b981" stroke-width="2"/>
    <text x="300" y="210" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      L2 Cache
    </text>
    <text x="300" y="230" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      ~40 MB
    </text>
    <text x="300" y="245" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      ~5 TB/s
    </text>
    
    <!-- Level 3: HBM (GPU Memory) -->
    <polygon points="150,260 100,340 500,340 450,260" fill="#fbbf24" opacity="0.8" stroke="#f59e0b" stroke-width="2"/>
    <text x="300" y="285" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#78350f">
      HBM (GPU Memory)
    </text>
    <text x="300" y="305" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#78350f">
      40-80 GB
    </text>
    <text x="300" y="320" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#78350f">
      ~1.5 TB/s
    </text>
    
    <!-- Level 4: System RAM (Bottom - Slowest) -->
    <polygon points="100,340 50,420 550,420 500,340" fill="#f59e0b" opacity="0.8" stroke="#dc2626" stroke-width="2"/>
    <text x="300" y="365" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      System RAM
    </text>
    <text x="300" y="385" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      256+ GB
    </text>
    <text x="300" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      ~50 GB/s
    </text>
    
    <!-- Side annotations -->
    <text x="50" y="260" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#059669">
      Speed ↑
    </text>
    <text x="50" y="280" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#dc2626">
      Size ↓
    </text>
    
    <text x="560" y="260" font-family="Arial, sans-serif" font-size="12" fill="#666">
      Latency:
    </text>
    <text x="560" y="280" font-family="Arial, sans-serif" font-size="12" fill="#666">
      1 cycle →
    </text>
    <text x="560" y="300" font-family="Arial, sans-serif" font-size="12" fill="#666">
      1000 cycles
    </text>
  </g>
  
  <!-- Compute vs Memory Bound Section -->
  <g id="compute-memory-bound">
    <text x="600" y="470" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
      Compute-Bound vs Memory-Bound Operations
    </text>
    
    <!-- Axis -->
    <line x1="100" y1="650" x2="1100" y2="650" stroke="#333" stroke-width="2"/>
    <text x="600" y="680" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#666">
      Arithmetic Intensity (FLOPs/byte) →
    </text>
    
    <!-- Memory-Bound Region (Left) -->
    <rect x="100" y="500" width="450" height="140" fill="#fecaca" opacity="0.5" stroke="#ef4444" stroke-width="2" rx="8"/>
    <text x="325" y="530" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#991b1b">
      Memory-Bound Region
    </text>
    <text x="325" y="555" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#7f1d1d">
      Limited by bandwidth
    </text>
    <text x="325" y="580" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f1d1d">
      • Element-wise operations
    </text>
    <text x="325" y="600" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f1d1d">
      • Small matrix multiplications
    </text>
    <text x="325" y="620" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f1d1d">
      • Batch normalization
    </text>
    
    <!-- Transition line -->
    <line x1="600" y1="490" x2="600" y2="660" stroke="#333" stroke-width="3" stroke-dasharray="10,5"/>
    <text x="600" y="710" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">
      ~50 FLOPs/byte
    </text>
    
    <!-- Compute-Bound Region (Right) -->
    <rect x="650" y="500" width="450" height="140" fill="#bbf7d0" opacity="0.5" stroke="#10b981" stroke-width="2" rx="8"/>
    <text x="875" y="530" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#065f46">
      Compute-Bound Region
    </text>
    <text x="875" y="555" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#064e3b">
      Limited by FLOPs
    </text>
    <text x="875" y="580" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#064e3b">
      • Large matrix multiplications
    </text>
    <text x="875" y="600" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#064e3b">
      • Convolutions
    </text>
    <text x="875" y="620" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#064e3b">
      • Attention mechanisms
    </text>
    
    <!-- A100 annotation -->
    <rect x="750" y="655" width="300" height="30" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="4"/>
    <text x="900" y="675" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e40af">
      A100: 312 TFLOPS ÷ 1.5 TB/s = 208 FLOPs/byte
    </text>
  </g>
  
  <!-- Key Insight Callout Box -->
  <rect x="50" y="730" width="1100" height="60" fill="#eff6ff" stroke="#3b82f6" stroke-width="3" rx="8"/>
  <text x="600" y="755" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1e3a8a">
    Key Insight for Leaders:
  </text>
  <text x="600" y="775" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e40af">
    Small operations are memory-limited • Large operations are compute-limited • Optimization strategy depends on bottleneck • Batch size affects which regime you're in
  </text>
</svg>
