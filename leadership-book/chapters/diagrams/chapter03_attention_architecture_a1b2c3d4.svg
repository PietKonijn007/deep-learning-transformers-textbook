<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #2d3748; }
      .label { font: 16px sans-serif; fill: #2d3748; }
      .small-label { font: 14px sans-serif; fill: #4a5568; }
      .annotation { font: 13px sans-serif; fill: #718096; }
      .box { fill: #667eea; stroke: #4c51bf; stroke-width: 2; }
      .box-secondary { fill: #764ba2; stroke: #553c9a; stroke-width: 2; }
      .box-accent { fill: #f093fb; stroke: #e879f9; stroke-width: 2; }
      .box-light { fill: #e6fffa; stroke: #81e6d9; stroke-width: 2; }
      .arrow { stroke: #4a5568; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .matrix-cell { fill: #764ba2; opacity: 0.3; stroke: #553c9a; stroke-width: 1; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4a5568" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title" text-anchor="middle">Attention Mechanism Architecture</text>
  
  <!-- Input -->
  <rect x="450" y="60" width="300" height="50" class="box" rx="5"/>
  <text x="600" y="90" class="label" text-anchor="middle">Input Sequence</text>
  <text x="600" y="105" class="small-label" text-anchor="middle">(512 × 768)</text>
  
  <!-- Arrows to Q, K, V -->
  <path d="M 500 110 L 250 180" class="arrow"/>
  <path d="M 600 110 L 600 180" class="arrow"/>
  <path d="M 700 110 L 950 180" class="arrow"/>
  
  <!-- Q, K, V boxes -->
  <rect x="150" y="180" width="200" height="60" class="box" rx="5"/>
  <text x="250" y="210" class="label" text-anchor="middle">Query (Q)</text>
  <text x="250" y="230" class="small-label" text-anchor="middle">512 × 768</text>
  
  <rect x="500" y="180" width="200" height="60" class="box" rx="5"/>
  <text x="600" y="210" class="label" text-anchor="middle">Key (K)</text>
  <text x="600" y="230" class="small-label" text-anchor="middle">512 × 768</text>
  
  <rect x="850" y="180" width="200" height="60" class="box" rx="5"/>
  <text x="950" y="210" class="label" text-anchor="middle">Value (V)</text>
  <text x="950" y="230" class="small-label" text-anchor="middle">512 × 768</text>
  
  <!-- Arrows from Q and K to Attention Scores -->
  <path d="M 250 240 L 400 320" class="arrow"/>
  <path d="M 600 240 L 500 320" class="arrow"/>
  
  <!-- Attention Scores box with matrix visualization -->
  <rect x="350" y="320" width="300" height="140" class="box-accent" rx="5"/>
  <text x="500" y="350" class="label" text-anchor="middle">Attention Scores</text>
  <text x="500" y="370" class="small-label" text-anchor="middle">Q × K^T → 512 × 512 matrix</text>
  
  <!-- Matrix grid visualization -->
  <g transform="translate(400, 385)">
    <rect x="0" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="12" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="24" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="36" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="48" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="60" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="72" y="0" width="10" height="10" class="matrix-cell"/>
    <rect x="84" y="0" width="10" height="10" class="matrix-cell"/>
    
    <rect x="0" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="12" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="24" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="36" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="48" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="60" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="72" y="12" width="10" height="10" class="matrix-cell"/>
    <rect x="84" y="12" width="10" height="10" class="matrix-cell"/>
    
    <rect x="0" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="12" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="24" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="36" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="48" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="60" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="72" y="24" width="10" height="10" class="matrix-cell"/>
    <rect x="84" y="24" width="10" height="10" class="matrix-cell"/>
    
    <rect x="0" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="12" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="24" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="36" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="48" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="60" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="72" y="36" width="10" height="10" class="matrix-cell"/>
    <rect x="84" y="36" width="10" height="10" class="matrix-cell"/>
    
    <text x="100" y="25" class="small-label">512×512</text>
  </g>
  
  <!-- Arrow to Softmax -->
  <path d="M 500 460 L 500 520" class="arrow"/>
  
  <!-- Softmax box -->
  <rect x="400" y="520" width="200" height="50" class="box-secondary" rx="5"/>
  <text x="500" y="545" class="label" text-anchor="middle">Softmax</text>
  <text x="500" y="560" class="small-label" text-anchor="middle">Normalize to probabilities</text>
  
  <!-- Arrows from Softmax and V to Weighted Sum -->
  <path d="M 500 570 L 500 640" class="arrow"/>
  <path d="M 950 240 L 950 600 L 650 640" class="arrow"/>
  
  <!-- Weighted Sum box -->
  <rect x="400" y="640" width="200" height="60" class="box-secondary" rx="5"/>
  <text x="500" y="665" class="label" text-anchor="middle">Weighted Sum</text>
  <text x="500" y="685" class="small-label" text-anchor="middle">Attention × V</text>
  
  <!-- Arrow to Output -->
  <path d="M 500 700 L 500 760" class="arrow"/>
  
  <!-- Output -->
  <rect x="400" y="760" width="200" height="50" class="box" rx="5"/>
  <text x="500" y="790" class="label" text-anchor="middle">Output</text>
  <text x="500" y="805" class="small-label" text-anchor="middle">(512 × 768)</text>
  
  <!-- Annotations -->
  <text x="50" y="210" class="annotation">Projection Cost:</text>
  <text x="50" y="230" class="annotation">O(n·d²)</text>
  
  <text x="1050" y="400" class="annotation">Attention Cost:</text>
  <text x="1050" y="420" class="annotation">O(n²·d)</text>
  
  <text x="700" y="400" class="annotation">← Quadratic</text>
  <text x="700" y="420" class="annotation">component</text>
</svg>
