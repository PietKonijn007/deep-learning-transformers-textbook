<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <!-- Background -->
  <rect width="1200" height="900" fill="white"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="26" font-weight="bold" text-anchor="middle" fill="#333">
    BERT-Base: Parameter and Memory Breakdown
  </text>
  
  <!-- TOP SECTION: Parameter Distribution as Horizontal Bars -->
  <g id="parameter-distribution">
    <text x="300" y="80" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
      Parameter Distribution (110M Total = 440 MB)
    </text>
    
    <!-- Feed-Forward: 52% -->
    <rect x="50" y="100" width="520" height="40" fill="#667eea" opacity="0.8" stroke="#667eea" stroke-width="2" rx="4"/>
    <text x="60" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      Feed-Forward Networks: 57M parameters (52%)
    </text>
    
    <!-- Embeddings: 21% -->
    <rect x="50" y="150" width="210" height="40" fill="#764ba2" opacity="0.8" stroke="#764ba2" stroke-width="2" rx="4"/>
    <text x="60" y="175" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      Embeddings: 23M (21%)
    </text>
    
    <!-- Attention: 19% -->
    <rect x="50" y="200" width="190" height="40" fill="#10b981" opacity="0.8" stroke="#10b981" stroke-width="2" rx="4"/>
    <text x="60" y="225" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      Attention: 21M (19%)
    </text>
    
    <!-- Other: 8% -->
    <rect x="50" y="250" width="80" height="40" fill="#f59e0b" opacity="0.8" stroke="#f59e0b" stroke-width="2" rx="4"/>
    <text x="60" y="275" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      Other: 9M (8%)
    </text>
    
    <!-- Scale reference -->
    <line x1="50" y1="310" x2="550" y2="310" stroke="#d1d5db" stroke-width="1"/>
    <text x="50" y="330" font-family="Arial, sans-serif" font-size="11" fill="#666">0M</text>
    <text x="300" y="330" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">55M</text>
    <text x="550" y="330" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">110M</text>
  </g>
  
  <!-- MIDDLE SECTION: Layer-by-Layer Breakdown -->
  <g id="layer-breakdown">
    <text x="100" y="380" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
      Per-Layer Breakdown (12 Layers)
    </text>
    
    <!-- Y-axis labels -->
    <text x="90" y="415" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 12</text>
    <text x="90" y="435" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 11</text>
    <text x="90" y="455" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 10</text>
    <text x="90" y="475" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 9</text>
    <text x="90" y="495" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 8</text>
    <text x="90" y="515" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 7</text>
    <text x="90" y="535" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 6</text>
    <text x="90" y="555" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 5</text>
    <text x="90" y="575" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 4</text>
    <text x="90" y="595" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 3</text>
    <text x="90" y="615" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 2</text>
    <text x="90" y="635" font-family="Arial, sans-serif" font-size="11" text-anchor="end" fill="#666">Layer 1</text>
    
    <!-- Stacked bars for each layer (Attention: 1.77M = 27px, Feed-forward: 4.72M = 73px) -->
    <g id="bars">
      <!-- Layer 1 -->
      <rect x="100" y="625" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="625" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 2 -->
      <rect x="100" y="605" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="605" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 3 -->
      <rect x="100" y="585" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="585" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 4 -->
      <rect x="100" y="565" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="565" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 5 -->
      <rect x="100" y="545" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="545" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 6 -->
      <rect x="100" y="525" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="525" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 7 -->
      <rect x="100" y="505" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="505" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 8 -->
      <rect x="100" y="485" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="485" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 9 -->
      <rect x="100" y="465" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="465" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 10 -->
      <rect x="100" y="445" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="445" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 11 -->
      <rect x="100" y="425" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="425" width="73" height="15" fill="#667eea" opacity="0.8"/>
      
      <!-- Layer 12 -->
      <rect x="100" y="405" width="27" height="15" fill="#10b981" opacity="0.8"/>
      <rect x="127" y="405" width="73" height="15" fill="#667eea" opacity="0.8"/>
    </g>
    
    <!-- X-axis -->
    <line x1="100" y1="645" x2="300" y2="645" stroke="#333" stroke-width="1"/>
    <text x="200" y="665" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
      Parameters (millions)
    </text>
    
    <!-- Legend for bars -->
    <rect x="320" y="490" width="15" height="15" fill="#10b981" opacity="0.8"/>
    <text x="340" y="502" font-family="Arial, sans-serif" font-size="12" fill="#333">
      Attention: 1.77M
    </text>
    
    <rect x="320" y="515" width="15" height="15" fill="#667eea" opacity="0.8"/>
    <text x="340" y="527" font-family="Arial, sans-serif" font-size="12" fill="#333">
      Feed-forward: 4.72M
    </text>
    
    <text x="340" y="550" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#666">
      Each layer: ~6.5M parameters
    </text>
  </g>
  
  <!-- RIGHT SECTION: Training Memory Breakdown -->
  <g id="memory-breakdown">
    <text x="850" y="380" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
      Training Memory Breakdown
    </text>
    
    <!-- Bar 1: Model Storage -->
    <g id="bar1">
      <text x="700" y="420" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
        Model Storage
      </text>
      <rect x="650" y="430" width="100" height="180" fill="#667eea" opacity="0.8" stroke="#667eea" stroke-width="2"/>
      <text x="700" y="530" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">
        440 MB
      </text>
      <text x="700" y="550" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
        Parameters
      </text>
      <text x="700" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
        440 MB
      </text>
    </g>
    
    <!-- Bar 2: Training (FP32) -->
    <g id="bar2">
      <text x="850" y="420" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
        Training (FP32)
      </text>
      <rect x="800" y="430" width="100" height="60" fill="#667eea" opacity="0.8" stroke="#667eea" stroke-width="1"/>
      <text x="850" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Params</text>
      
      <rect x="800" y="490" width="100" height="60" fill="#764ba2" opacity="0.8" stroke="#764ba2" stroke-width="1"/>
      <text x="850" y="525" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Gradients</text>
      
      <rect x="800" y="550" width="100" height="60" fill="#f59e0b" opacity="0.8" stroke="#f59e0b" stroke-width="1"/>
      <text x="850" y="585" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Optimizer</text>
      
      <text x="850" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
        1,760 MB
      </text>
    </g>
    
    <!-- Bar 3: Training + Activations -->
    <g id="bar3">
      <text x="1000" y="410" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
        Training +
      </text>
      <text x="1000" y="428" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
        Activations
      </text>
      <rect x="950" y="430" width="100" height="30" fill="#667eea" opacity="0.8" stroke="#667eea" stroke-width="1"/>
      <rect x="950" y="460" width="100" height="30" fill="#764ba2" opacity="0.8" stroke="#764ba2" stroke-width="1"/>
      <rect x="950" y="490" width="100" height="60" fill="#f59e0b" opacity="0.8" stroke="#f59e0b" stroke-width="1"/>
      <rect x="950" y="550" width="100" height="60" fill="#ef4444" opacity="0.8" stroke="#ef4444" stroke-width="1"/>
      <text x="1000" y="585" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">
        Activations
      </text>
      <text x="1000" y="600" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">
        3,500 MB
      </text>
      
      <text x="1000" y="630" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">
        ~6,000 MB
      </text>
      <text x="1000" y="648" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#10b981">
        = 6 GB
      </text>
    </g>
    
    <!-- Annotation -->
    <text x="850" y="675" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
      Batch size = 32, Sequence length = 512
    </text>
    
    <!-- Callout -->
    <text x="1070" y="580" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ef4444">
      ← Activations
    </text>
    <text x="1070" y="597" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ef4444">
      dominate!
    </text>
  </g>
  
  <!-- Key Insights Box -->
  <rect x="50" y="720" width="1100" height="160" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="8"/>
  <text x="600" y="750" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#92400e">
    Key Insights for Leaders
  </text>
  <g id="insights">
    <text x="80" y="780" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Feed-forward layers: 52% of parameters
    </text>
    <text x="80" y="805" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Activations: 60% of training memory
    </text>
    <text x="80" y="830" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Doubling batch size ≈ doubles memory
    </text>
    <text x="80" y="855" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Doubling sequence length ≈ doubles memory
    </text>
    
    <text x="650" y="780" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Optimizer states: 2× parameter memory
    </text>
    <text x="650" y="805" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Total training memory >> model size
    </text>
    <text x="650" y="830" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Memory is often the limiting factor
    </text>
    <text x="650" y="855" font-family="Arial, sans-serif" font-size="13" text-anchor="start" fill="#78350f">
      • Gradient checkpointing trades speed for memory
    </text>
  </g>
</svg>
