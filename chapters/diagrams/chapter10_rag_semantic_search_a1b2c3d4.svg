<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title-text { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1f2937; }
      .component-box { fill: #667eea; stroke: #4f46e5; stroke-width: 2; }
      .component-box-alt { fill: #764ba2; stroke: #5b21b6; stroke-width: 2; }
      .component-box-accent { fill: #f093fb; stroke: #db2777; stroke-width: 2; }
      .database { fill: #10b981; stroke: #059669; stroke-width: 2; }
      .component-text { font-family: Arial, sans-serif; font-size: 15px; font-weight: bold; fill: white; text-anchor: middle; }
      .component-detail { font-family: Arial, sans-serif; font-size: 12px; fill: white; text-anchor: middle; }
      .timing-text { font-family: Arial, sans-serif; font-size: 11px; fill: #6b7280; text-anchor: middle; font-style: italic; }
      .arrow { stroke: #4b5563; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .cost-box { fill: #f3f4f6; stroke: #d1d5db; stroke-width: 1; }
      .cost-text { font-family: Arial, sans-serif; font-size: 13px; fill: #374151; }
      .query-box { fill: #eff6ff; stroke: #3b82f6; stroke-width: 2; }
      .answer-box { fill: #f0fdf4; stroke: #10b981; stroke-width: 2; }
      .doc-item { font-family: Arial, sans-serif; font-size: 11px; fill: #1f2937; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4b5563" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="title-text">RAG Architecture for Semantic Search</text>
  
  <!-- 1. User Query -->
  <rect x="30" y="100" width="140" height="80" rx="8" class="query-box"/>
  <text x="100" y="130" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: 600; fill: #1e40af;">User Query</text>
  <text x="100" y="150" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #1e40af;">"What's our remote</text>
  <text x="100" y="165" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #1e40af;">work policy?"</text>
  
  <!-- Arrow 1 -->
  <line x1="170" y1="140" x2="210" y2="140" class="arrow"/>
  
  <!-- 2. BERT Encoder -->
  <rect x="210" y="100" width="140" height="80" rx="8" class="component-box"/>
  <text x="280" y="130" class="component-text">BERT Encoder</text>
  <text x="280" y="150" class="component-detail">(Fine-tuned)</text>
  <text x="280" y="165" class="component-detail">768 dimensions</text>
  <text x="280" y="200" class="timing-text">~10ms</text>
  
  <!-- Arrow 2 -->
  <line x1="350" y1="140" x2="390" y2="140" class="arrow"/>
  
  <!-- 3. Query Embedding -->
  <rect x="390" y="110" width="100" height="60" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="440" y="135" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 12px; font-weight: 600; fill: #92400e;">Embedding</text>
  <text x="440" y="152" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 10px; fill: #92400e;">[0.23, -0.45, ...]</text>
  
  <!-- Arrow 3 -->
  <line x1="490" y1="140" x2="530" y2="140" class="arrow"/>
  
  <!-- 4. Vector Database -->
  <ellipse cx="600" cy="120" rx="60" ry="20" class="database"/>
  <rect x="540" y="120" width="120" height="80" class="database"/>
  <ellipse cx="600" cy="200" rx="60" ry="20" class="database"/>
  <text x="600" y="155" class="component-text">Pinecone</text>
  <text x="600" y="175" class="component-detail">500K docs</text>
  <text x="600" y="190" class="component-detail">embedded</text>
  <text x="600" y="230" class="timing-text">~50ms</text>
  
  <!-- Arrow 4 -->
  <line x1="660" y1="160" x2="700" y2="160" class="arrow"/>
  
  <!-- 5. Retrieved Documents -->
  <rect x="700" y="80" width="200" height="160" rx="8" fill="#f0f9ff" stroke="#0284c7" stroke-width="2"/>
  <text x="800" y="105" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #0c4a6e;">Top 5 Documents</text>
  <text x="710" y="130" class="doc-item">1. Distributed Team Guide (0.89)</text>
  <text x="710" y="150" class="doc-item">2. WFH Procedures (0.85)</text>
  <text x="710" y="170" class="doc-item">3. Remote Work Policy (0.82)</text>
  <text x="710" y="190" class="doc-item">4. Flexible Work (0.78)</text>
  <text x="710" y="210" class="doc-item">5. Collaboration Guide (0.75)</text>
  
  <!-- Arrow 5 (down) -->
  <line x1="800" y1="240" x2="800" y2="280" class="arrow"/>
  
  <!-- 6. Context Construction -->
  <rect x="720" y="280" width="160" height="60" rx="8" class="component-box-alt"/>
  <text x="800" y="305" class="component-text">Context</text>
  <text x="800" y="325" class="component-text">Construction</text>
  
  <!-- Arrow 6 (down) -->
  <line x1="800" y1="340" x2="800" y2="380" class="arrow"/>
  
  <!-- 7. GPT-3.5-turbo -->
  <rect x="720" y="380" width="160" height="80" rx="8" class="component-box-accent"/>
  <text x="800" y="410" class="component-text">GPT-3.5-turbo</text>
  <text x="800" y="430" class="component-detail">Answer</text>
  <text x="800" y="445" class="component-detail">Generation</text>
  <text x="800" y="480" class="timing-text">~1-2s</text>
  
  <!-- Arrow 7 (down) -->
  <line x1="800" y1="460" x2="800" y2="500" class="arrow"/>
  
  <!-- 8. Generated Answer -->
  <rect x="700" y="500" width="200" height="100" rx="8" class="answer-box"/>
  <text x="800" y="525" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: 600; fill: #065f46;">Generated Answer</text>
  <text x="710" y="550" style="font-family: Arial, sans-serif; font-size: 11px; fill: #065f46;">"Our remote work policy</text>
  <text x="710" y="565" style="font-family: Arial, sans-serif; font-size: 11px; fill: #065f46;">allows employees to work</text>
  <text x="710" y="580" style="font-family: Arial, sans-serif; font-size: 11px; fill: #065f46;">from home up to 3 days..."</text>
  
  <!-- Total Latency Box -->
  <rect x="30" y="280" width="300" height="60" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="180" y="305" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #92400e;">Total Latency</text>
  <text x="180" y="325" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; fill: #92400e;">1.1 - 2.1 seconds</text>
  
  <!-- Cost Analysis Box -->
  <rect x="30" y="380" width="620" height="220" rx="8" class="cost-box"/>
  <text x="340" y="405" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1f2937;">Cost Analysis</text>
  
  <!-- Initial Setup Costs -->
  <text x="50" y="435" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #374151;">Initial Setup:</text>
  <text x="50" y="455" class="cost-text">• Fine-tune BERT embeddings: $2,000</text>
  <text x="50" y="475" class="cost-text">• Embed 500K documents: $500</text>
  <text x="50" y="495" class="cost-text">• Engineering (3 weeks): $15,000</text>
  <text x="50" y="515" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #1f2937;">Total Initial: $17,500</text>
  
  <!-- Monthly Operational Costs -->
  <text x="360" y="435" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #374151;">Monthly Operational:</text>
  <text x="360" y="455" class="cost-text">• Pinecone: $70/month</text>
  <text x="360" y="475" class="cost-text">• GPT-3.5 API (10K queries): $200/month</text>
  <text x="360" y="495" class="cost-text">• Monitoring/maintenance: $500/month</text>
  <text x="360" y="515" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #1f2937;">Total Monthly: $770</text>
  
  <!-- ROI -->
  <rect x="50" y="535" width="580" height="50" rx="6" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="340" y="555" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #065f46;">ROI: $31,730/month benefit | Payback period: &lt;1 month</text>
  <text x="340" y="575" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 12px; fill: #065f46;">85% relevance rate | 10-30× faster than manual search</text>
  
  <!-- Key Insight Box -->
  <rect x="30" y="630" width="1140" height="50" rx="8" fill="#eff6ff" stroke="#3b82f6" stroke-width="2"/>
  <text x="600" y="650" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: 600; fill: #1e40af;">Key Insight: RAG provides 80-95% cost savings vs fine-tuning while maintaining comparable accuracy.</text>
  <text x="600" y="670" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 12px; fill: #1e40af;">Domain fine-tuning of embeddings ($2K) yields 17% accuracy improvement—worth the investment.</text>
  
  <!-- Flow Labels -->
  <text x="190" y="130" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #6b7280;">encode</text>
  <text x="370" y="130" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #6b7280;">embed</text>
  <text x="510" y="130" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #6b7280;">search</text>
  <text x="680" y="150" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 11px; fill: #6b7280;">retrieve</text>
</svg>
