<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title-text { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1f2937; }
      .component-box { fill: #667eea; stroke: #4f46e5; stroke-width: 2; }
      .component-box-alt { fill: #764ba2; stroke: #5b21b6; stroke-width: 2; }
      .component-box-success { fill: #10b981; stroke: #059669; stroke-width: 2; }
      .component-box-warning { fill: #f59e0b; stroke: #d97706; stroke-width: 2; }
      .component-box-error { fill: #ef4444; stroke: #dc2626; stroke-width: 2; }
      .database { fill: #8b5cf6; stroke: #7c3aed; stroke-width: 2; }
      .component-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: white; text-anchor: middle; }
      .component-detail { font-family: Arial, sans-serif; font-size: 11px; fill: white; text-anchor: middle; }
      .timing-text { font-family: Arial, sans-serif; font-size: 10px; fill: #6b7280; text-anchor: middle; font-style: italic; }
      .arrow { stroke: #4b5563; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-success { stroke: #10b981; stroke-width: 2; fill: none; marker-end: url(#arrowhead-success); }
      .arrow-error { stroke: #ef4444; stroke-width: 2; fill: none; marker-end: url(#arrowhead-error); }
      .info-text { font-family: Arial, sans-serif; font-size: 12px; fill: #374151; }
      .metric-text { font-family: Arial, sans-serif; font-size: 13px; fill: #1f2937; font-weight: 600; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4b5563" />
    </marker>
    <marker id="arrowhead-success" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
    <marker id="arrowhead-error" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ef4444" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="title-text">Customer Support Chatbot Architecture</text>
  
  <!-- 1. User Message -->
  <rect x="480" y="70" width="240" height="60" rx="30" fill="#eff6ff" stroke="#3b82f6" stroke-width="2"/>
  <text x="600" y="95" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: 600; fill: #1e40af;">User Message</text>
  <text x="600" y="115" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 12px; fill: #1e40af;">"How do I reset my password?"</text>
  
  <!-- Arrow down -->
  <line x1="600" y1="130" x2="600" y2="170" class="arrow"/>
  
  <!-- 2. Conversation Manager (Central) -->
  <rect x="480" y="170" width="240" height="70" rx="8" class="component-box"/>
  <text x="600" y="195" class="component-text">Conversation Manager</text>
  <text x="600" y="215" class="component-detail">Orchestration &amp; State</text>
  <text x="600" y="230" class="component-detail">Management</text>
  
  <!-- Conversation Database (left side) -->
  <ellipse cx="200" cy="190" rx="60" ry="15" class="database"/>
  <rect x="140" y="190" width="120" height="60" class="database"/>
  <ellipse cx="200" cy="250" rx="60" ry="15" class="database"/>
  <text x="200" y="215" class="component-text">Conversation</text>
  <text x="200" y="235" class="component-text">Database</text>
  <text x="200" y="275" class="component-detail">Full history + metadata</text>
  
  <!-- Arrow from DB to Manager -->
  <line x1="260" y1="220" x2="480" y2="205" class="arrow"/>
  
  <!-- Knowledge Base (right side) -->
  <ellipse cx="1000" cy="190" rx="60" ry="15" class="database"/>
  <rect x="940" y="190" width="120" height="60" class="database"/>
  <ellipse cx="1000" cy="250" rx="60" ry="15" class="database"/>
  <text x="1000" y="215" class="component-text">Knowledge</text>
  <text x="1000" y="235" class="component-text">Base</text>
  <text x="1000" y="275" class="component-detail">10K articles embedded</text>
  
  <!-- 3. Intent Classifier -->
  <rect x="150" y="310" width="180" height="60" rx="8" class="component-box-alt"/>
  <text x="240" y="335" class="component-text">Intent Classifier</text>
  <text x="240" y="355" class="component-detail">Password Reset / Billing / etc</text>
  <text x="240" y="385" class="timing-text">~50ms</text>
  
  <!-- Arrow from Manager to Intent -->
  <line x1="520" y1="240" x2="330" y2="310" class="arrow"/>
  
  <!-- 4. Knowledge Retriever -->
  <rect x="510" y="310" width="180" height="60" rx="8" class="component-box-alt"/>
  <text x="600" y="335" class="component-text">Knowledge Retriever</text>
  <text x="600" y="355" class="component-detail">Vector search → Top 3 articles</text>
  <text x="600" y="385" class="timing-text">~100ms</text>
  
  <!-- Arrow from Manager to Retriever -->
  <line x1="600" y1="240" x2="600" y2="310" class="arrow"/>
  
  <!-- Arrow from KB to Retriever -->
  <line x1="940" y1="220" x2="690" y2="330" class="arrow"/>
  
  <!-- 5. Context Manager -->
  <rect x="870" y="310" width="180" height="90" rx="8" class="component-box-warning"/>
  <text x="960" y="330" class="component-text">Context Manager</text>
  <text x="960" y="350" class="component-detail">Recent 2-3 exchanges</text>
  <text x="960" y="370" class="component-detail">~2K tokens ($0.003)</text>
  <text x="960" y="390" class="component-detail" style="text-decoration: line-through; opacity: 0.6;">Full history: 30K tokens ($0.03)</text>
  
  <!-- Arrow from Manager to Context -->
  <line x1="680" y1="240" x2="870" y2="340" class="arrow"/>
  
  <!-- 6. Response Generator -->
  <rect x="510" y="450" width="180" height="70" rx="8" fill="#f093fb" stroke="#db2777" stroke-width="2"/>
  <text x="600" y="475" class="component-text">GPT-3.5-turbo</text>
  <text x="600" y="495" class="component-detail">Response Generation</text>
  <text x="600" y="510" class="component-detail">Context + Knowledge → Answer</text>
  <text x="600" y="540" class="timing-text">~1.5-2s</text>
  
  <!-- Arrows to Generator -->
  <line x1="240" y1="370" x2="550" y2="450" class="arrow"/>
  <line x1="600" y1="370" x2="600" y2="450" class="arrow"/>
  <line x1="960" y1="400" x2="650" y2="450" class="arrow"/>
  
  <!-- 7. Confidence Evaluator (Decision Diamond) -->
  <path d="M 600,560 L 700,610 L 600,660 L 500,610 Z" fill="#f59e0b" stroke="#d97706" stroke-width="2"/>
  <text x="600" y="605" class="component-text">Confidence</text>
  <text x="600" y="625" class="component-text">> 0.75?</text>
  
  <!-- Arrow from Generator to Evaluator -->
  <line x1="600" y1="520" x2="600" y2="560" class="arrow"/>
  
  <!-- YES path (left) - Automated Response -->
  <line x1="500" y1="610" x2="350" y2="610" class="arrow-success"/>
  <text x="420" y="600" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #10b981;">YES (72%)</text>
  
  <rect x="200" y="580" width="150" height="60" rx="8" class="component-box-success"/>
  <text x="275" y="605" class="component-text">Automated</text>
  <text x="275" y="625" class="component-text">Response</text>
  
  <!-- NO path (right) - Human Escalation -->
  <line x1="700" y1="610" x2="850" y2="610" class="arrow-error"/>
  <text x="780" y="600" style="font-family: Arial, sans-serif; font-weight: bold; fill: #ef4444;">NO (28%)</text>
  
  <rect x="850" y="580" width="150" height="60" rx="8" class="component-box-error"/>
  <text x="925" y="605" class="component-text">Escalate to</text>
  <text x="925" y="625" class="component-text">Human Agent</text>
  
  <!-- Metrics Box -->
  <rect x="50" y="690" width="550" height="180" rx="8" fill="#f0fdf4" stroke="#10b981" stroke-width="2"/>
  <text x="325" y="715" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #065f46;">Performance Metrics</text>
  
  <text x="70" y="745" class="metric-text">Automation Rate: 72%</text>
  <text x="70" y="770" class="metric-text">Accuracy: 87%</text>
  <text x="70" y="795" class="metric-text">Avg Response Time: 2 seconds</text>
  <text x="70" y="820" class="metric-text">Monthly Operational Cost: $1,015</text>
  <text x="70" y="845" style="font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #065f46;">Cost Savings: 70% vs human-only</text>
  
  <!-- Cost Comparison Table -->
  <rect x="650" y="690" width="500" height="180" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="900" y="715" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #92400e;">Cost Comparison</text>
  
  <!-- Table Header -->
  <rect x="670" y="730" width="220" height="30" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
  <rect x="890" y="730" width="240" height="30" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
  <text x="780" y="750" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #92400e;">Approach</text>
  <text x="1010" y="750" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #92400e;">Monthly Cost</text>
  
  <!-- Row 1 -->
  <rect x="670" y="760" width="220" height="30" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <rect x="890" y="760" width="240" height="30" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <text x="780" y="780" text-anchor="middle" class="info-text">GPT-4 32K context</text>
  <text x="1010" y="780" text-anchor="middle" class="info-text">$30,000</text>
  
  <!-- Row 2 -->
  <rect x="670" y="790" width="220" height="30" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <rect x="890" y="790" width="240" height="30" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <text x="780" y="810" text-anchor="middle" class="info-text">GPT-3.5 selective context</text>
  <text x="1010" y="810" text-anchor="middle" class="info-text">$300</text>
  
  <!-- Row 3 - Savings -->
  <rect x="670" y="820" width="220" height="30" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <rect x="890" y="820" width="240" height="30" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="780" y="840" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #065f46;">Savings</text>
  <text x="1010" y="840" text-anchor="middle" style="font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #065f46;">99% reduction</text>
  
  <!-- Key Insight -->
  <rect x="50" y="880" width="1100" height="10" rx="4" fill="#3b82f6"/>
</svg>
