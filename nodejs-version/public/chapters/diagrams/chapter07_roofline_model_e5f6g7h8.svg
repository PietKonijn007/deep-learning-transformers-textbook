<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #2d3748; }
      .subtitle { font: bold 16px sans-serif; fill: #2d3748; }
      .label { font: 14px sans-serif; fill: #2d3748; }
      .annotation { font: 12px sans-serif; fill: #718096; }
      .metric { font: bold 13px sans-serif; }
      .axis-label { font: 14px sans-serif; fill: #4a5568; }
      .grid-line { stroke: #e2e8f0; stroke-width: 1; }
      .compute-bound { fill: #48bb78; }
      .memory-bound { fill: #e53e3e; }
      .borderline { fill: #ed8936; }
    </style>
  </defs>
  
  <text x="600" y="30" class="title" text-anchor="middle">Roofline Model: A100 Performance Limits</text>
  <text x="600" y="55" class="annotation" text-anchor="middle">Achieved Performance = min(Peak Compute, Bandwidth × Arithmetic Intensity)</text>
  
  <!-- Chart area -->
  <g transform="translate(100, 100)">
    <!-- Grid lines -->
    <line x1="0" y1="0" x2="0" y2="500" stroke="#4a5568" stroke-width="2"/>
    <line x1="0" y1="500" x2="900" y2="500" stroke="#4a5568" stroke-width="2"/>
    
    <!-- Y-axis labels (Performance in TFLOPS) -->
    <text x="-10" y="505" class="axis-label" text-anchor="end">0</text>
    <text x="-10" y="405" class="axis-label" text-anchor="end">50</text>
    <text x="-10" y="305" class="axis-label" text-anchor="end">100</text>
    <text x="-10" y="205" class="axis-label" text-anchor="end">200</text>
    <text x="-10" y="105" class="axis-label" text-anchor="end">300</text>
    <text x="-10" y="5" class="axis-label" text-anchor="end">350</text>
    
    <!-- X-axis labels (Arithmetic Intensity) -->
    <text x="0" y="525" class="axis-label" text-anchor="middle">1</text>
    <text x="180" y="525" class="axis-label" text-anchor="middle">10</text>
    <text x="360" y="525" class="axis-label" text-anchor="middle">50</text>
    <text x="540" y="525" class="axis-label" text-anchor="middle">100</text>
    <text x="720" y="525" class="axis-label" text-anchor="middle">200</text>
    <text x="900" y="525" class="axis-label" text-anchor="middle">300</text>
    
    <!-- Axis titles -->
    <text x="-60" y="250" class="label" transform="rotate(-90 -60 250)" text-anchor="middle">Performance (TFLOPS)</text>
    <text x="450" y="560" class="label" text-anchor="middle">Arithmetic Intensity (FLOP/byte)</text>
    
    <!-- Grid lines -->
    <line x1="0" y1="400" x2="900" y2="400" class="grid-line"/>
    <line x1="0" y1="300" x2="900" y2="300" class="grid-line"/>
    <line x1="0" y1="200" x2="900" y2="200" class="grid-line"/>
    <line x1="0" y1="100" x2="900" y2="100" class="grid-line"/>
    
    <!-- Peak compute line (horizontal at 312 TFLOPS) -->
    <line x1="0" y1="110" x2="900" y2="110" stroke="#667eea" stroke-width="3" stroke-dasharray="5,5"/>
    <text x="910" y="115" class="metric" fill="#667eea">Peak: 312 TFLOPS</text>
    
    <!-- Bandwidth limit line (diagonal: Performance = 2 TB/s × AI) -->
    <!-- At AI=1: 2 TFLOPS (y=498), At AI=156: 312 TFLOPS (y=110) -->
    <line x1="0" y1="498" x2="468" y2="110" stroke="#e53e3e" stroke-width="3"/>
    <text x="250" y="280" class="metric" fill="#e53e3e" transform="rotate(-40 250 280)">Bandwidth: 2 TB/s</text>
    
    <!-- Data points -->
    <!-- Softmax: AI=1.2, Perf=2 TFLOPS -->
    <circle cx="36" cy="497" r="8" class="memory-bound"/>
    <text x="36" y="520" class="annotation" text-anchor="middle" font-size="11">Softmax</text>
    <text x="36" y="535" class="annotation" text-anchor="middle" font-size="10">AI=1.2</text>
    <text x="36" y="548" class="metric" text-anchor="middle" font-size="10" fill="#e53e3e">2 TF</text>
    
    <!-- Small matmul: AI=32, Perf=50 TFLOPS -->
    <circle cx="324" cy="430" r="8" class="memory-bound"/>
    <text x="324" y="415" class="annotation" text-anchor="middle" font-size="11">Small</text>
    <text x="324" y="428" class="annotation" text-anchor="middle" font-size="11">Matmul</text>
    <text x="324" y="453" class="annotation" text-anchor="middle" font-size="10">AI=32</text>
    <text x="324" y="466" class="metric" text-anchor="middle" font-size="10" fill="#e53e3e">50 TF</text>
    
    <!-- Attention n=2048: AI=50, Perf=78 TFLOPS -->
    <circle cx="360" cy="390" r="8" class="memory-bound"/>
    <text x="360" y="375" class="annotation" text-anchor="middle" font-size="11">Attn</text>
    <text x="360" y="388" class="annotation" text-anchor="middle" font-size="11">n=2048</text>
    <text x="360" y="413" class="annotation" text-anchor="middle" font-size="10">AI=50</text>
    <text x="360" y="426" class="metric" text-anchor="middle" font-size="10" fill="#e53e3e">78 TF</text>
    
    <!-- Attention n=512: AI=200, Perf=220 TFLOPS -->
    <circle cx="720" cy="170" r="8" class="borderline"/>
    <text x="720" y="155" class="annotation" text-anchor="middle" font-size="11">Attn</text>
    <text x="720" y="168" class="annotation" text-anchor="middle" font-size="11">n=512</text>
    <text x="720" y="193" class="annotation" text-anchor="middle" font-size="10">AI=200</text>
    <text x="720" y="206" class="metric" text-anchor="middle" font-size="10" fill="#ed8936">220 TF</text>
    
    <!-- Large matmul: AI=256, Perf=280 TFLOPS -->
    <circle cx="768" cy="130" r="8" class="compute-bound"/>
    <text x="768" y="115" class="annotation" text-anchor="middle" font-size="11">Large</text>
    <text x="768" y="128" class="annotation" text-anchor="middle" font-size="11">Matmul</text>
    <text x="768" y="153" class="annotation" text-anchor="middle" font-size="10">AI=256</text>
    <text x="768" y="166" class="metric" text-anchor="middle" font-size="10" fill="#48bb78">280 TF</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(50, 620)">
    <rect x="0" y="0" width="350" height="70" fill="white" stroke="#cbd5e0" rx="5"/>
    <text x="175" y="20" class="label" text-anchor="middle">Operation Types</text>
    
    <circle cx="20" cy="40" r="6" class="compute-bound"/>
    <text x="35" y="45" class="annotation">Compute-Bound (90% peak)</text>
    
    <circle cx="20" cy="60" r="6" class="borderline"/>
    <text x="35" y="65" class="annotation">Borderline (70% peak)</text>
    
    <circle cx="200" cy="40" r="6" class="memory-bound"/>
    <text x="215" y="45" class="annotation">Memory-Bound (&lt;25% peak)</text>
  </g>
  
  <!-- Key insight -->
  <rect x="420" y="620" width="730" height="70" fill="#fef5e7" stroke="#ed8936" stroke-width="2" rx="5"/>
  <text x="785" y="640" class="label" text-anchor="middle">Key Insight</text>
  <text x="785" y="660" class="annotation" text-anchor="middle">Long-context attention (n=2048) is memory-bound: O(n²) memory grows faster than O(n²d) compute.</text>
  <text x="785" y="678" class="annotation" text-anchor="middle">More powerful GPUs won't help—need efficient attention variants or more bandwidth.</text>
</svg>
