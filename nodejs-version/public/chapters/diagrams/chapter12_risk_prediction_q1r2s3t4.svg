<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #1a1a1a; }
      .subtitle { font: bold 16px sans-serif; fill: #2c3e50; }
      .label { font: 14px sans-serif; fill: #2c3e50; }
      .small-label { font: 12px sans-serif; fill: #555; }
      .metric { font: bold 14px sans-serif; fill: #27ae60; }
      .box { fill: #ecf0f1; stroke: #34495e; stroke-width: 2; }
      .data-box { fill: #e8f4f8; stroke: #3498db; stroke-width: 2; }
      .model-box { fill: #fef5e7; stroke: #f39c12; stroke-width: 2; }
      .output-box { fill: #e8f8f5; stroke: #16a085; stroke-width: 2; }
      .intervention-box { fill: #fdecea; stroke: #e74c3c; stroke-width: 2; }
      .arrow { fill: none; stroke: #7f8c8d; stroke-width: 2; marker-end: url(#arrowhead); }
      .data-arrow { fill: none; stroke: #3498db; stroke-width: 2; marker-end: url(#arrowhead-blue); }
      .feedback-arrow { fill: none; stroke: #e74c3c; stroke-width: 2; stroke-dasharray: 5,5; marker-end: url(#arrowhead-red); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="title">Patient Risk Prediction Architecture</text>

  <!-- Data Sources Section -->
  <text x="150" y="80" class="subtitle">Data Sources</text>
  
  <rect x="30" y="95" width="140" height="60" class="data-box" rx="5"/>
  <text x="100" y="115" text-anchor="middle" class="label">Demographics</text>
  <text x="100" y="135" text-anchor="middle" class="small-label">Age, Gender,</text>
  <text x="100" y="148" text-anchor="middle" class="small-label">Insurance</text>
  
  <rect x="30" y="170" width="140" height="60" class="data-box" rx="5"/>
  <text x="100" y="190" text-anchor="middle" class="label">Diagnoses</text>
  <text x="100" y="210" text-anchor="middle" class="small-label">ICD-10 Codes,</text>
  <text x="100" y="223" text-anchor="middle" class="small-label">Comorbidities</text>
  
  <rect x="30" y="245" width="140" height="60" class="data-box" rx="5"/>
  <text x="100" y="265" text-anchor="middle" class="label">Medications</text>
  <text x="100" y="285" text-anchor="middle" class="small-label">Current & Past,</text>
  <text x="100" y="298" text-anchor="middle" class="small-label">Adherence</text>
  
  <rect x="30" y="320" width="140" height="60" class="data-box" rx="5"/>
  <text x="100" y="340" text-anchor="middle" class="label">Lab Values</text>
  <text x="100" y="360" text-anchor="middle" class="small-label">Trends Over</text>
  <text x="100" y="373" text-anchor="middle" class="small-label">Time</text>
  
  <rect x="30" y="395" width="140" height="60" class="data-box" rx="5"/>
  <text x="100" y="415" text-anchor="middle" class="label">Vital Signs</text>
  <text x="100" y="435" text-anchor="middle" class="small-label">BP, HR, Temp,</text>
  <text x="100" y="448" text-anchor="middle" class="small-label">O2 Sat</text>

  <!-- EHR Integration -->
  <rect x="220" y="220" width="120" height="80" class="box" rx="5"/>
  <text x="280" y="245" text-anchor="middle" class="label">EHR</text>
  <text x="280" y="260" text-anchor="middle" class="label">Integration</text>
  <text x="280" y="280" text-anchor="middle" class="small-label">Data Extract,</text>
  <text x="280" y="293" text-anchor="middle" class="small-label">Clean, Transform</text>

  <!-- Arrows from data sources to EHR -->
  <path d="M 170 125 L 220 250" class="data-arrow"/>
  <path d="M 170 200 L 220 250" class="data-arrow"/>
  <path d="M 170 275 L 220 260" class="data-arrow"/>
  <path d="M 170 350 L 220 270" class="data-arrow"/>
  <path d="M 170 425 L 220 280" class="data-arrow"/>

  <!-- Model Types Section -->
  <text x="480" y="80" class="subtitle">Prediction Models</text>
  
  <rect x="380" y="95" width="200" height="70" class="model-box" rx="5"/>
  <text x="480" y="115" text-anchor="middle" class="label">Gradient Boosted Trees</text>
  <text x="480" y="135" text-anchor="middle" class="small-label">XGBoost, LightGBM</text>
  <text x="480" y="150" text-anchor="middle" class="metric">Interpretable, Fast</text>

  <rect x="380" y="180" width="200" height="70" class="model-box" rx="5"/>
  <text x="480" y="200" text-anchor="middle" class="label">Neural Networks</text>
  <text x="480" y="220" text-anchor="middle" class="small-label">Deep Learning on Structured Data</text>
  <text x="480" y="235" text-anchor="middle" class="metric">+3-8% Performance</text>

  <rect x="380" y="265" width="200" height="70" class="model-box" rx="5"/>
  <text x="480" y="285" text-anchor="middle" class="label">Temporal Models</text>
  <text x="480" y="305" text-anchor="middle" class="small-label">RNN, TCN</text>
  <text x="480" y="320" text-anchor="middle" class="metric">Time Series Patterns</text>

  <!-- Arrow from EHR to Models -->
  <path d="M 340 260 L 380 215" class="arrow"/>

  <!-- Applications Section -->
  <text x="800" y="80" class="subtitle">Risk Applications</text>
  
  <rect x="650" y="95" width="180" height="65" class="output-box" rx="5"/>
  <text x="740" y="115" text-anchor="middle" class="label">Readmission Risk</text>
  <text x="740" y="135" text-anchor="middle" class="small-label">30-day readmission</text>
  <text x="740" y="150" text-anchor="middle" class="metric">$10K-25K per event</text>

  <rect x="650" y="175" width="180" height="65" class="output-box" rx="5"/>
  <text x="740" y="195" text-anchor="middle" class="label">Sepsis Detection</text>
  <text x="740" y="215" text-anchor="middle" class="small-label">Early warning 30-60 min</text>
  <text x="740" y="230" text-anchor="middle" class="metric">$5K-15K per patient</text>

  <rect x="650" y="255" width="180" height="65" class="output-box" rx="5"/>
  <text x="740" y="275" text-anchor="middle" class="label">Mortality Prediction</text>
  <text x="740" y="295" text-anchor="middle" class="small-label">In-hospital & 30-day</text>
  <text x="740" y="310" text-anchor="middle" class="metric">Care planning value</text>

  <rect x="650" y="335" width="180" height="65" class="output-box" rx="5"/>
  <text x="740" y="355" text-anchor="middle" class="label">High-Cost Patients</text>
  <text x="740" y="375" text-anchor="middle" class="small-label">Top 20% of costs</text>
  <text x="740" y="390" text-anchor="middle" class="metric">Proactive management</text>

  <!-- Arrows from Models to Applications -->
  <path d="M 580 130 L 650 130" class="arrow"/>
  <path d="M 580 207 L 650 207" class="arrow"/>
  <path d="M 580 287 L 650 287" class="arrow"/>
  <path d="M 580 320 L 620 320 L 620 367 L 650 367" class="arrow"/>

  <!-- Clinical Workflow Integration -->
  <rect x="880" y="95" width="280" height="305" class="box" rx="5"/>
  <text x="1020" y="120" text-anchor="middle" class="subtitle">Clinical Workflow</text>
  
  <rect x="900" y="135" width="240" height="50" class="intervention-box" rx="5"/>
  <text x="1020" y="155" text-anchor="middle" class="label">Alert Generation</text>
  <text x="1020" y="175" text-anchor="middle" class="small-label">PPV >50% to avoid alert fatigue</text>

  <rect x="900" y="200" width="240" height="50" class="intervention-box" rx="5"/>
  <text x="1020" y="220" text-anchor="middle" class="label">Care Team Notification</text>
  <text x="1020" y="240" text-anchor="middle" class="small-label">Integrated with EHR dashboard</text>

  <rect x="900" y="265" width="240" height="50" class="intervention-box" rx="5"/>
  <text x="1020" y="285" text-anchor="middle" class="label">Intervention Protocol</text>
  <text x="1020" y="305" text-anchor="middle" class="small-label">Care coordination, monitoring</text>

  <rect x="900" y="330" width="240" height="55" class="intervention-box" rx="5"/>
  <text x="1020" y="350" text-anchor="middle" class="label">Outcome Tracking</text>
  <text x="1020" y="370" text-anchor="middle" class="small-label">Measure intervention effectiveness</text>

  <!-- Arrows to workflow -->
  <path d="M 830 130 L 880 160" class="arrow"/>
  <path d="M 830 207 L 880 225" class="arrow"/>
  <path d="M 830 287 L 880 290" class="arrow"/>
  <path d="M 830 367 L 880 357" class="arrow"/>

  <!-- Implementation Challenges -->
  <rect x="30" y="500" width="540" height="270" class="box" rx="5"/>
  <text x="300" y="530" text-anchor="middle" class="subtitle">Implementation Challenges</text>
  
  <text x="50" y="560" class="label">• Clinical Validation:</text>
  <text x="70" y="580" class="small-label">Prospective studies demonstrate real-world performance</text>
  <text x="70" y="598" class="small-label">Retrospective validation insufficient for deployment</text>
  
  <text x="50" y="625" class="label">• Workflow Integration:</text>
  <text x="70" y="645" class="small-label">Predictions must appear where clinicians naturally look</text>
  <text x="70" y="663" class="small-label">Separate systems rarely achieve high utilization</text>
  
  <text x="50" y="690" class="label">• Alert Fatigue:</text>
  <text x="70" y="710" class="small-label">PPV <50% leads to clinicians ignoring alerts</text>
  <text x="70" y="728" class="small-label">Balance sensitivity vs. specificity carefully</text>
  
  <text x="50" y="755" class="label">• Model Drift:</text>
  <text x="70" y="775" class="small-label">Patient populations and practices change over time</text>

  <!-- Economic Analysis -->
  <rect x="610" y="500" width="560" height="270" class="box" rx="5"/>
  <text x="890" y="530" text-anchor="middle" class="subtitle">Economic Analysis</text>
  
  <text x="630" y="560" class="label">Implementation Costs:</text>
  <text x="650" y="580" class="small-label">• EHR Integration: $100K-300K (6-12 months)</text>
  <text x="650" y="598" class="small-label">• Data Infrastructure: Real-time extraction & cleaning</text>
  <text x="650" y="616" class="small-label">• Clinical Validation: Studies demonstrating effectiveness</text>
  <text x="650" y="634" class="small-label">• Total: $300K-1M for health system deployment</text>
  
  <text x="630" y="665" class="label">Value Examples:</text>
  <text x="650" y="685" class="small-label">• Readmission: Prevent 6 of 30 high-risk → $60K saved</text>
  <text x="650" y="703" class="small-label">• Sepsis: 50 cases, 30% improvement → $150K value</text>
  <text x="650" y="721" class="small-label">• ROI: 0.2-5× depending on scale and intervention success</text>
  
  <text x="630" y="750" class="label">Ongoing Costs:</text>
  <text x="650" y="770" class="small-label">• Continuous monitoring and retraining: 10-20% annually</text>

  <!-- Feedback loop -->
  <path d="M 1020 385 L 1020 450 L 100 450 L 100 395" class="feedback-arrow"/>
  <text x="560" y="470" text-anchor="middle" class="small-label" fill="#e74c3c">Continuous Improvement Loop</text>

</svg>
